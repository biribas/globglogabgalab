<!DOCTYPE html>

<html lang="en">
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <link href="styles.css" rel="stylesheet">
        <title>Free Response Quiz</title>
        <script>
            const N = 5;
            var score = 0;
            var answered = new Array(N).fill(false);
            const answers = [/nagini/, /don quixote/, /kermit/, /violet|purple/, /john ronald reuel/];
            const messages = ['You didn\'t get any questions right. :(',
                              'Congratulations!!! You got all the questions right! :)'];
            const exp = ['Nagini is Voldemort\'s inseparable snake, who considers her the only being worthy enough of his attentions and affections.',
                        'Don Quixote is the best-selling book in history. It was realeased in 1612 ans has sold 500 million copies.',
                        'Kermit was one of the first and best known Muppets created by Jim Henson.',
                        'The colours of the rainbow, from first to last, are: red, orange, yellow, green, blue, indigo and violet.',
                        'John Ronald Reuel Tolkien was the author of the high fantasy novels \"The Hobbit\" and \"The Lord of the Rings\".'];

            document.addEventListener('DOMContentLoaded', () => {
                Array.from({length: N}, (_, i) => document.querySelector('button.question' + (i + 1)))
                .forEach((button, i) => button.addEventListener('click', () => {
                    if (!answered[i]) {
                        answered[i] = true;
                        let text = document.querySelector('input.question' + (i + 1));
                        text.readOnly = true;
                        text.placeholder = '';
                        if (answers[i].test(text.value.toLowerCase())) {
                            text.style.backgroundColor = '#90ee90';
                            document.querySelector('p.question' + (i + 1)).innerHTML = 'Correct. ' + exp[i];
                            score++;
                        }
                        else {
                            text.style.backgroundColor = '#ff4f4b';
                            document.querySelector('p.question' + (i + 1)).innerHTML = 'Incorrect. ' + exp[i];
                        }

                        if (answered.every(e => e)) {
                            document.querySelector('#feedback').innerHTML = !score ? messages[0] : score == N ? messages[1] : `You got ${score}/${N} questions right!`;
                            document.querySelector('.return').style.display = 'inline';
                            sessionStorage.setItem('score3', score);
                        }
                    }
                }));
            });
        </script>
    </head>
    <body>
        <div class="header">
            <h1>Free Response Quiz</h1>
        </div>

        <div class="section">
            <div>
                <h4>In the Harry Potter saga, what is the name of Lord Voldemort's snake? </h4>
                <div class="parent">
                    <div class="child">
                        <input autocomplete="off" autofocus class="form-control question1" placeholder="Answer" type="text"/>
                    </div>
                    <div class="child">
                        <button class="btn btn-outline-dark question1">Check Answer</button>
                    </div>
                </div>
                <p class="question1"></p>

                <hr>

                <h4>What is the best-selling novel of all time?</h4>
                <div class="parent">
                    <div class="child">
                        <input autocomplete="off" class="form-control question2" placeholder="Answer" type="text"/>
                    </div>
                    <div class="child">
                        <button class="btn btn-outline-dark question2">Check Answer</button>
                    </div>
                </div>
                <p class="question2"></p>

                <hr>

                <h4>What is the name of the frog in Sesame Street and the Muppet Show?</h4>
                <div class="parent">
                    <div class="child">
                        <input autocomplete="off" class="form-control question3" placeholder="Answer" type="text"/>
                    </div>
                    <div class="child">
                        <button class="btn btn-outline-dark question3">Check Answer</button>
                    </div>
                </div>
                <p class="question3"></p>

                <hr>

                <h4>What is the last color in the rainbow?</h4>
                <div class="parent">
                    <div class="child">
                        <input autocomplete="off" class="form-control question4" placeholder="Answer" type="text"/>
                    </div>
                    <div class="child">
                        <button class="btn btn-outline-dark question4">Check Answer</button>
                    </div>
                </div>
                <p class="question4"></p>

                <hr>

                <h4>What do the initials of the author J.R.R. Tolkien's name stand for?</h4>
                <div class="parent">
                    <div class="child">
                        <input autocomplete="off" class="form-control question5" placeholder="Answer" type="text"/>
                    </div>
                    <div class="child">
                        <button class="btn btn-outline-dark question5">Check Answer</button>
                    </div>
                </div>
                <p class="question5"></p>

                <hr>

                <h4 id="feedback"></h4>
                <div class="text-center">
                    <a class="btn btn-outline-dark return" href="index.html">Return to Homepage</a>
                </div>
            </div>
        </div>
        <footer class="bg-light text-center text-lg-start">
            <div class="text-center p-3" style="background-color: grey;">
                A homepage made by
                <a class="text-dark" href="https://github.com/saintwalker2814">SaintWalker</a>
                for CS50 Problem Set 8
            </div>
        </footer>
    </body>
</html>
